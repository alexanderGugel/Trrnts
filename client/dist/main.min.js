/*! Trrnts 14-07-2014 */

angular.module("trrntsApp",["ui.router","trrntsApp.main"]).config(["$stateProvider",function(a){a.state("trrntsApp",{template:"<ui-view></ui-view>"})}]).run(["$state",function(a){a.transitionTo("trrntsApp.main")}]),angular.module("trrntsApp.controllers",[]).controller("SubmitMagnetLinkController",["$scope","MagnetLinksFactory",function(a,b){a.magnetURI="",a.submit=function(){a.magnetURI&&b.create(a.magnetURI).catch(function(a){console.error(a)})}}]).controller("LatestMagnetLinksController",["$scope","MagnetLinksFactory",function(a,b){a.latest=[],b.latest().then(function(b){a.latest=b.data}).catch(function(){a.latest=[]})}]).controller("TopMagnetLinksController",["$scope","MagnetLinksFactory",function(a,b){a.top=[],b.top().then(function(b){a.top=b.data}).catch(function(){a.top=[]})}]),angular.module("trrntsApp.directives",[]).directive("barChart",function(){return{restrict:"A",link:function(a,b,c){b=b[0];var d=c.barWidth||20,e=c.barSpace||1,f=c.barChartHeight||70,g=c.highlightHeightDiff||20,h=a.data||[12,16,17,7,24,8,5,19,8,12,12,43],i=d3.scale.linear().domain([0,d3.max(h)]).range([0,f-g]),j=d3.select(b).selectAll("rect").data(h);j.enter().append("rect").attr("class","bar").attr("width",d).attr("x",function(a,b){return d*b+e*b}).attr("y",f).attr("height",0).transition().delay(function(a,b){return 100*b}).attr("y",function(a){return f-i(a)}).attr("height",function(a){return i(a)}),j.on("mouseover",function(a,b){j.filter(function(a,c){return c===b}).transition().attr("y",function(a){return f-i(a)-g}).attr("height",function(a){return i(a)+g})}),j.on("mouseleave",function(a,b){j.filter(function(a,c){return c===b}).transition().attr("y",function(a){return f-i(a)}).attr("height",function(a){return i(a)})})}}}),angular.module("trrntsApp.filters",[]).filter("agoFilter",function(){return function(a){return a=parseInt(a),moment(a).fromNow()+" ago"}}),angular.module("trrntsApp.main",["trrntsApp.controllers","trrntsApp.services","trrntsApp.directives","trrntsApp.filters"]).config(["$stateProvider",function(a){a.state("trrntsApp.main",{url:"/",views:{"":{templateUrl:"views/main.tpl.html"},"submitMagnet@trrntsApp.main":{templateUrl:"views/submitMagnet.tpl.html",controller:"SubmitMagnetLinkController"},"topMagnets@trrntsApp.main":{templateUrl:"views/topMagnets.tpl.html",controller:"TopMagnetLinksController"},"latestMagnets@trrntsApp.main":{templateUrl:"views/latestMagnets.tpl.html",controller:"LatestMagnetLinksController"}}})}]),angular.module("trrntsApp.services",[]).factory("MagnetLinksFactory",["$http",function(a){var b=function(b){return a({method:"POST",url:"/api/magnets",data:{magnetURI:b}})},c=function(b,c){return a({method:"GET",url:"api/magnets/latest",params:{start:b||1,stop:c||30}})},d=function(b,c){return a({method:"GET",url:"api/magnets/top",params:{start:b||1,stop:c||30}})};return{create:b,latest:c,top:d}}]);
//# sourceMappingURL=main.min.js.map